import{defineModule as e}from"@directus/extensions-sdk";import{defineComponent as r,ref as n,resolveComponent as t,createBlock as a,openBlock as o,withCtx as d,createElementVNode as i,createElementBlock as s,createCommentVNode as c,toDisplayString as l,withModifiers as m,withDirectives as u,vModelText as g}from"vue";var v=r({setup(){const e=n(""),r=n(!1),t=n(""),a=n("");return{email:e,loading:r,successMessage:t,errorMessage:a,requestMagicLink:async()=>{r.value=!0,t.value="",a.value="";try{const r=await fetch("/server/magic-link-api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.value,redirectUrl:`https://${window.location.host}/server/admin/magic-link/verify`})}),n=await r.json();n.success?(t.value=n.message||"Check your email for the magic link!",e.value=""):a.value=n.message||"Something went wrong. Please try again."}catch(e){a.value="Network error. Please check your connection and try again."}finally{r.value=!1}}}}}),p=[],b=[];!function(e,r){if(e&&"undefined"!=typeof document){var n,t=!0===r.prepend?"prepend":"append",a=!0===r.singleTag,o="string"==typeof r.container?document.querySelector(r.container):document.getElementsByTagName("head")[0];if(a){var d=p.indexOf(o);-1===d&&(d=p.push(o)-1,b[d]={}),n=b[d]&&b[d][t]?b[d][t]:b[d][t]=i()}else n=i();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function i(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),r.attributes)for(var n=Object.keys(r.attributes),a=0;a<n.length;a++)e.setAttribute(n[a],r.attributes[n[a]]);var d="prepend"===t?"afterbegin":"beforeend";return o.insertAdjacentElement(d,e),e}}('\n.magic-link-container[data-v-d1811dd5] {\r\n\tmax-width: 400px;\r\n\tmargin: 2rem auto;\r\n\tpadding: 2rem;\r\n\ttext-align: center;\n}\nh1[data-v-d1811dd5] {\r\n\tcolor: var(--theme--primary);\r\n\tmargin-bottom: 0.5rem;\r\n\tfont-size: 1.5rem;\n}\np[data-v-d1811dd5] {\r\n\tcolor: var(--theme--foreground-subdued);\r\n\tmargin-bottom: 2rem;\r\n\tfont-size: 0.875rem;\n}\n.magic-link-form[data-v-d1811dd5] {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 1rem;\n}\ninput[type="email"][data-v-d1811dd5] {\r\n\tpadding: 0.75rem 1rem;\r\n\tborder: 1px solid var(--theme--border-color);\r\n\tborder-radius: var(--theme--border-radius);\r\n\tfont-size: 1rem;\r\n\tbackground: var(--theme--background);\r\n\tcolor: var(--theme--foreground);\n}\ninput[type="email"][data-v-d1811dd5]:focus {\r\n\toutline: none;\r\n\tborder-color: var(--theme--primary);\n}\nbutton[data-v-d1811dd5] {\r\n\tpadding: 0.75rem;\r\n\tbackground: var(--theme--primary);\r\n\tcolor: var(--theme--primary-foreground);\r\n\tborder: none;\r\n\tborder-radius: var(--theme--border-radius);\r\n\tfont-size: 1rem;\r\n\tfont-weight: 600;\r\n\tcursor: pointer;\r\n\ttransition: background-color 0.2s;\n}\nbutton[data-v-d1811dd5]:hover:not(:disabled) {\r\n\tbackground: var(--theme--primary-accent);\n}\nbutton[data-v-d1811dd5]:disabled {\r\n\topacity: 0.6;\r\n\tcursor: not-allowed;\n}\n.message[data-v-d1811dd5] {\r\n\tpadding: 0.75rem;\r\n\tborder-radius: var(--theme--border-radius);\r\n\tmargin-bottom: 1rem;\r\n\tfont-size: 0.875rem;\n}\n.success[data-v-d1811dd5] {\r\n\tbackground: var(--theme--success-background);\r\n\tcolor: var(--theme--success);\r\n\tborder: 1px solid var(--theme--success-border);\n}\n.error[data-v-d1811dd5] {\r\n\tbackground: var(--theme--danger-background);\r\n\tcolor: var(--theme--danger);\r\n\tborder: 1px solid var(--theme--danger-border);\n}\r\n',{});const h={class:"magic-link-container"},f={key:0,class:"message success"},y={key:1,class:"message error"},k=["disabled"],x=["disabled"];const M=[],w=[],S=[],L=[e({id:"magic-link",name:"Magic Link",icon:"mail",routes:[{path:"",component:((e,r)=>{const n=e.__vccOpts||e;for(const[e,t]of r)n[e]=t;return n})(v,[["render",function(e,r,n,v,p,b){const M=t("public-view");return o(),a(M,null,{default:d(()=>[i("div",h,[r[2]||(r[2]=i("h1",null,"🔐 Magic Link Login",-1)),r[3]||(r[3]=i("p",null,"Enter your email to receive a secure login link",-1)),e.successMessage?(o(),s("div",f,l(e.successMessage),1)):c("v-if",!0),e.errorMessage?(o(),s("div",y,l(e.errorMessage),1)):c("v-if",!0),i("form",{onSubmit:r[1]||(r[1]=m((...r)=>e.requestMagicLink&&e.requestMagicLink(...r),["prevent"])),class:"magic-link-form"},[u(i("input",{"onUpdate:modelValue":r[0]||(r[0]=r=>e.email=r),type:"email",placeholder:"your@email.com",required:"",autocomplete:"email",disabled:e.loading},null,8,k),[[g,e.email]]),i("button",{type:"submit",disabled:e.loading||!e.email},l(e.loading?"Sending...":"Send Magic Link"),9,x)],32)])]),_:1})}],["__scopeId","data-v-d1811dd5"]])}],preRegisterCheck:()=>!0,hidden:!0})],T=[],q=[],z=[];export{w as displays,M as interfaces,S as layouts,L as modules,z as operations,T as panels,q as themes};
